<!-- b9417507-d376-440b-b294-8ae9e9b886fe 07c64d37-09db-47f1-897d-b5d3438485ba -->
# Fix Ticket Analyzer - Enable Manual Runbook Search

## Problem

The Ticket Analyzer is failing because:

1. **56 out of 57 approved runbooks are not indexed** for vector search
2. **Model loading takes ~2 minutes** on first request, causing 500 errors
3. Only runbook #63 is searchable; all others are invisible to the search

## Solution

### 1. Re-index All Approved Runbooks

**File:** Create `backend/app/scripts/reindex_runbooks.py`

Create a script to re-index all approved runbooks that are currently missing from the vector store.

```python
# Pseudo-logic:
# 1. Query all approved runbooks
# 2. For each runbook, call `_index_runbook_for_search`
# 3. Report progress
```

**Execution:** Run via docker exec to populate the vector store

### 2. Add Frontend Error Handling

**File:** `frontend-nextjs/src/components/TicketAnalyzer.tsx`

Add better error messaging and loading states:

- Show "First request may take 2 minutes..." warning
- Display timeout errors clearly
- Add retry button

### 3. Optional: Document Future Production Flow

**File:** `backend/PRODUCTION_ROADMAP.md` (new)

Document the future connector-based auto-analysis flow for Phase 2:

- Auto-connect ticket sources (ServiceNow, Jira, etc.)
- Auto-analyze each ticket for runbook gaps
- Flag missing runbooks for creation

## Testing

1. Run reindex script
2. Verify all 57 runbooks are now searchable
3. Test manual ticket analysis with various descriptions
4. Confirm recommendations work correctly

## Notes

- This maintains the current POC manual input model
- Production auto-analysis is documented but not implemented (Phase 2)
- Model loading optimization is deferred (acceptable for POC)

### To-dos

- [ ] Create and run reindex script to make all 57 approved runbooks searchable
- [ ] Add better error handling and loading states in TicketAnalyzer component
- [ ] Create PRODUCTION_ROADMAP.md documenting future connector-based auto-analysis